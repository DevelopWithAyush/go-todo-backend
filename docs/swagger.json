{
    "swagger": "2.0",
    "info": {
        "description": "A production-ready RESTful API for managing todo items with OTP-based authentication. This API provides secure user authentication using email OTP verification and JWT tokens stored in HTTP-only cookies. Users can create, read, update, and delete their personal todo items with full CRUD operations.",
        "title": "TODO App API",
        "contact": {
            "name": "Ayush Dubey",
            "email": "ayushdubey2017@gmail.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "host": "localhost:5000",
    "basePath": "/api/v1",
    "paths": {
        "/auth/send-otp": {
            "post": {
                "description": "Sends a one-time password (OTP) to the provided email address for authentication. The OTP is valid for 10 minutes.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Authentication"
                ],
                "summary": "Send OTP to user's email",
                "parameters": [
                    {
                        "description": "Email address to send OTP",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.SendOTPRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OTP sent successfully",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to send OTP",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/auth/verify-otp": {
            "post": {
                "description": "Verifies the OTP sent to user's email. On success, returns a JWT token and sets an HTTP-only cookie for authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify OTP and authenticate user",
                "parameters": [
                    {
                        "description": "Email and OTP for verification",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.VerifyOTPRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OTP verified successfully, JWT token returned",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.VerifyOTPResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Invalid or expired OTP",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/todos": {
            "get": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "description": "Retrieves all todo items belonging to the authenticated user, sorted by position",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Todos"
                ],
                "summary": "List all todos for authenticated user",
                "responses": {
                    "200": {
                        "description": "List of todos",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.TodoListResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing authentication",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "description": "Creates a new todo item for the authenticated user",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Todos"
                ],
                "summary": "Create a new todo",
                "parameters": [
                    {
                        "description": "Todo details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.CreateTodoRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Created todo",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.TodoCreateResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing authentication",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to create todo",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/todos/{id}": {
            "put": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "description": "Updates an existing todo item for the authenticated user",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Todos"
                ],
                "summary": "Update a todo",
                "parameters": [
                    {
                        "type": "string",
                        "example": "507f1f77bcf86cd799439011",
                        "description": "Todo ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Updated todo details",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.UpdateTodoRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Todo updated successfully",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body or todo ID",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing authentication",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to update todo",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "description": "Deletes an existing todo item for the authenticated user",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Todos"
                ],
                "summary": "Delete a todo",
                "parameters": [
                    {
                        "type": "string",
                        "example": "507f1f77bcf86cd799439011",
                        "description": "Todo ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Todo deleted successfully",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid todo ID",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing authentication",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Failed to delete todo",
                        "schema": {
                            "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "github_com_developwithayush_go-todo-app_internal_dto.CreateTodoRequest": {
            "description": "Request body for creating a new todo item",
            "type": "object",
            "required": [
                "title"
            ],
            "properties": {
                "description": {
                    "type": "string",
                    "example": "Milk, eggs, bread"
                },
                "title": {
                    "type": "string",
                    "example": "Buy groceries"
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.ErrorResponse": {
            "description": "Standard error response wrapper",
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "example": "Error message"
                },
                "success": {
                    "type": "boolean",
                    "example": false
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.MessageResponse": {
            "description": "Simple message response",
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "example": "Operation completed successfully"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.SendOTPRequest": {
            "description": "Request body for sending OTP to user's email",
            "type": "object",
            "required": [
                "email"
            ],
            "properties": {
                "email": {
                    "type": "string",
                    "example": "user@example.com"
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.TodoCreateResponse": {
            "description": "Response after successfully creating a todo",
            "type": "object",
            "properties": {
                "data": {
                    "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.TodoResponse"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.TodoListResponse": {
            "description": "Response containing list of todo items",
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_developwithayush_go-todo-app_internal_dto.TodoResponse"
                    }
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.TodoResponse": {
            "description": "Todo item response structure",
            "type": "object",
            "properties": {
                "completed": {
                    "type": "boolean",
                    "example": false
                },
                "createdAt": {
                    "type": "string",
                    "example": "2024-01-15T10:30:00Z"
                },
                "description": {
                    "type": "string",
                    "example": "Milk, eggs, bread"
                },
                "id": {
                    "type": "string",
                    "example": "507f1f77bcf86cd799439011"
                },
                "position": {
                    "type": "integer",
                    "example": 0
                },
                "title": {
                    "type": "string",
                    "example": "Buy groceries"
                },
                "updatedAt": {
                    "type": "string",
                    "example": "2024-01-15T10:30:00Z"
                },
                "userId": {
                    "type": "string",
                    "example": "507f1f77bcf86cd799439012"
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.UpdateTodoRequest": {
            "description": "Request body for updating an existing todo item",
            "type": "object",
            "properties": {
                "description": {
                    "type": "string",
                    "example": "Milk, eggs, bread, butter"
                },
                "title": {
                    "type": "string",
                    "example": "Buy groceries (updated)"
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.VerifyOTPRequest": {
            "description": "Request body for verifying OTP",
            "type": "object",
            "required": [
                "email",
                "otp"
            ],
            "properties": {
                "email": {
                    "type": "string",
                    "example": "user@example.com"
                },
                "otp": {
                    "type": "string",
                    "example": "1234"
                }
            }
        },
        "github_com_developwithayush_go-todo-app_internal_dto.VerifyOTPResponse": {
            "description": "Response containing JWT token after successful OTP verification",
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "example": "OTP verified successfully"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                },
                "token": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
            }
        }
    },
    "securityDefinitions": {
        "CookieAuth": {
            "description": "JWT token stored in HTTP-only cookie. Obtain token by verifying OTP at /auth/verify-otp endpoint.",
            "type": "apiKey",
            "name": "todo_app",
            "in": "cookie"
        }
    }
}